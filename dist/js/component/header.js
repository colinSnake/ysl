"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}define(["jquery","plate","url","cookie"],function(i,n,t){return new(function(){function e(){_classCallCheck(this,e),this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;new Promise(function(e,n){i("header").load("/html/component/header.html",function(){e()})}).then(function(){n.init(t.baseUrlRap2+"plate"),e.login(),e.search(),e.getHnum()})}},{key:"login",value:function(){if(i.cookie("user")){var e=JSON.parse(i.cookie("user")).username;e?(i("#welcome").html("欢迎您，"+e+" 注销"),i("#welcome").on("click",function(){confirm("您确定退出？")&&(i("#welcome").html("登录与注册"),i.cookie("user","",{path:"/",expires:-1}))})):window.location.href="../login.html"}}},{key:"search",value:function(){i("form").on("submit",function(e){e.preventDefault();var n=i("form").serialize();console.log(n),i.getJSON("https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?cb=?&"+n,function(e){var n=e.s;i(".empty").empty().show(),n.forEach(function(e,n){i("<li>").html(e).appendTo(i(".empty"))})}),i(".empty").on("click","li",function(){i("input[type=text]").val(i(this).text()),i(".empty").hide()})})}},{key:"getHnum",value:function(){for(var e=JSON.parse(i.cookie("cart")),n=0,t=i("header #cnum"),o=0;o<e.length;o++)n+=parseInt(e[o].pnum),t.text(n)}}]),e}())});