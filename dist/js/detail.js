"use strict";require(["./requirejs.config"],function(){require(["jquery","url","template","header","footer","cookie"],function(s,t,d){var e=location.search.slice(1).split("="),u={};u[e[0]]=e[1],console.log(u),s.ajax({url:t.baseUrlRap2+"detail",type:"GET",data:u,dataType:"json",success:function(t){if(console.log(t),t.res_code){var r=function(t){for(var e=s.cookie("cart")?JSON.parse(s.cookie("cart")):[],i=!0,c=0;c<e.length;c++)e[c].id===t.id&&(e[c].pnum+=n,i=!1);i&&e.push(t),s.cookie("cart",JSON.stringify(e),{path:"/"}),console.log(JSON.parse(s.cookie("cart")))},e=t.resbody.data,i=d("detail-template",{list:e});s("#detail-item").html(i),console.log(s("#detail-img1")),s("#detail-img1").on("click",function(){s("#pic").attr("src",s(this).children("img").attr("src")),s(this).addClass("ac").siblings().removeClass("ac")}),s("#detail-img2").on("click",function(){s("#pic").attr("src",s(this).children("img").attr("src")),s(this).addClass("ac").siblings().removeClass("ac")});var c=s(".wrap #addCart"),o=s("#addBtn"),a=s("#redBtn"),l=s("#num"),n=1;o.on("click",function(){n++,l.html(n),console.log(n),console.log(l.html())}),a.on("click",function(){--n<=1&&(n=1),l.html(n),console.log(n)}),c.on("click",function(){var t,e,i,c,o,a;t=s("#price").text(),e=s("#title").text(),i=n,c=s("#ml").text(),o=u.id,a=s("#pic").attr("src"),r({ml:c,pnum:i,title:e,price:t,img:a,id:o}),function(){for(var t=JSON.parse(s.cookie("cart")),e=0,i=s("header #cnum"),c=0;c<t.length;c++)e+=parseInt(t[c].pnum),i.text(e)}()})}}})})});